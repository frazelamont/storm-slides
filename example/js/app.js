(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
'use strict';

var _component = require('./libs/component');

var _component2 = _interopRequireDefault(_component);

function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
}

var onDOMContentLoadedTasks = [function () {
    _component2.default.init('.js-slides-default');
}];

if ('addEventListener' in window) window.addEventListener('DOMContentLoaded', function () {
    onDOMContentLoadedTasks.forEach(function (fn) {
        return fn();
    });
});

},{"./libs/component":2}],2:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
	value: true
});

var _defaults = require('./lib/defaults');

var _defaults2 = _interopRequireDefault(_defaults);

var _componentPrototype = require('./lib/component-prototype');

var _componentPrototype2 = _interopRequireDefault(_componentPrototype);

function _interopRequireDefault(obj) {
	return obj && obj.__esModule ? obj : { default: obj };
}

var init = function init(sel, opts) {
	var els = [].slice.call(document.querySelectorAll(sel));
	//let els = Array.from(document.querySelectorAll(sel));

	if (!els.length) throw new Error('Slides not initialised, no augmentable elements found');

	return els.map(function (el) {
		return Object.assign(Object.create(_componentPrototype2.default), {
			node: el,
			settings: Object.assign({}, _defaults2.default, opts)
		}).init();
	});
};

exports.default = { init: init };

},{"./lib/component-prototype":3,"./lib/defaults":4}],3:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
	value: true
});
var KEY_CODES = {
	ENTER: 13
},
    TRIGGER_EVENTS = ['click', 'keydown'];

exports.default = {
	init: function init() {
		var _this = this;

		this.slides = [].slice.call(this.node.querySelectorAll(this.settings.itemSelector)).map(function (slide) {
			return {
				unloadedImgs: [].slice.call(slide.querySelectorAll('[data-srcset], [data-src]')),
				container: slide
			};
		});

		this.nextButton = this.node.querySelector(this.settings.buttonNextSelector);
		this.previousButton = this.node.querySelector(this.settings.buttonPreviousSelector);
		this.navItems = [].slice.call(this.node.querySelectorAll(this.settings.navItemSelector));

		if (this.navItems.length > 0 && this.navItems.length !== this.slides.length) throw new Error('Slide navigation does not match the number of slides.');

		this.notification = this.node.querySelector(this.settings.liveRegionSelector);
		this.setCurrent(this.settings.startIndex);
		this.slides[this.currentIndex].container.classList.add(this.settings.activeClass);
		this.initHandlers();
		this.settings.preload ? this.slides.forEach(function (slide, i) {
			_this.loadImage(i);
		}) : this.loadImages(this.settings.startIndex);
		this.settings.autoPlay ? this.autoPlay(this.settings.slideDuration) : null;
		return this;
	},
	initHandlers: function initHandlers() {
		var _this2 = this;

		TRIGGER_EVENTS.forEach(function (ev) {
			['previous', 'next'].forEach(function (type) {
				if (_this2[type + 'Button']) _this2[type + 'Button'].addEventListener(ev, function (e) {
					if (e.keyCode && e.keyCode !== KEY_CODES.ENTER) return;
					_this2[type]();
				});
			});
			_this2.navItems.length > 0 && _this2.navItems.forEach(function (item, i) {
				item.addEventListener(ev, function (e) {
					if (e.keyCode && e.keyCode !== KEY_CODES.ENTER) return;
					_this2.change(i);
				});
			});
		});
	},
	loadImage: function loadImage(i) {
		var _this3 = this;

		if (!this.slides[i].unloadedImgs.length) return;

		this.slides[i].container.classList.add(this.settings.loadingClass);
		this.slides[i].unloadedImgs = this.slides[i].unloadedImgs.reduce(function (acc, el) {
			['src', 'srcset'].forEach(function (type) {
				if (el.hasAttribute('data-' + type)) {
					el.setAttribute(type, el.getAttribute('data-' + type));
					el.removeAttribute('data-' + type);
				}
				_this3.slides[i].container.classList.remove(_this3.settings.loadingClass);
			});
			return acc;
		}, []);
	},
	loadImages: function loadImages(i) {
		var _this4 = this;

		if (!this.node.querySelector('[data-src], [data-srcset]')) return;
		var indexes = [i];

		if (this.slides.length > 1) indexes.push(i === 0 ? this.slides.length - 1 : i - 1);
		if (this.slides.length > 2) indexes.push(i === this.slides.length - 1 ? 0 : i + 1);

		indexes.forEach(function (idx) {
			_this4.loadImage(idx);
		});
	},
	reset: function reset() {
		this.slides[this.currentIndex].container.classList.remove(this.settings.activeClass);
		this.slides[this.currentIndex].container.removeAttribute('tabindex');
		this.navItems.length && this.navItems[this.currentIndex].removeAttribute('aria-current');

		var previouslyHidden = this.node.querySelector('.' + this.settings.hidePreviousClass),
		    previouslyShown = this.node.querySelector('.' + this.settings.showPreviousClass),
		    nextShown = this.node.querySelector('.' + this.settings.showNextClass),
		    nextHidden = this.node.querySelector('.' + this.settings.hideNextClass);

		previouslyHidden && previouslyHidden.classList.remove(this.settings.hidePreviousClass);
		previouslyShown && previouslyShown.classList.remove(this.settings.showPreviousClass);
		nextShown && nextShown.classList.remove(this.settings.showNextClass);
		nextHidden && nextHidden.classList.remove(this.settings.hideNextClass);
	},
	next: function next() {
		this.change(this.currentIndex === this.slides.length - 1 ? 0 : this.currentIndex + 1);
	},
	previous: function previous() {
		this.change(this.currentIndex === 0 ? this.slides.length - 1 : this.currentIndex - 1);
	},
	change: function change(index) {
		if (index === this.currentIndex) return;

		this.reset();

		index = index === -1 ? this.slides.length - 1 : index === this.slides.length ? 0 : index;

		this.loadImages(index);

		var isForwards = (index > this.currentIndex || index === 0 && this.currentIndex === this.slides.length - 1) && !(index === this.slides.length - 1 && this.currentIndex === 0);

		this.slides[this.currentIndex].container.classList.add(isForwards ? this.settings.hidePreviousClass : this.settings.hideNextClass);
		this.slides[index].container.classList.add('' + (isForwards ? this.settings.showNextClass : this.settings.showPreviousClass));
		this.setCurrent(index);
		!this.settings.autoPlay && this.slides[index].container.focus();

		this.settings.callback && typeof this.settings.callback === 'function' && this.settings.callback();
	},
	setCurrent: function setCurrent(i) {
		this.slides[i].container.classList.add(this.settings.activeClass);
		this.slides[i].container.setAttribute('tabindex', '-1');
		this.navItems.length && this.navItems[i].setAttribute('aria-current', true);
		this.notification.innerHTML = 'Slide ' + (i + 1) + ' of ' + this.slides.length;
		this.currentIndex = i;
	},
	autoPlay: function autoPlay(slideDuration) {
		var _this5 = this;

		this.interval = setInterval(function () {
			_this5.next();
		}, slideDuration ? slideDuration * 1000 : 5000);
	}
};

},{}],4:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.default = {
	buttonPreviousSelector: '.js-slides__previous',
	buttonNextSelector: '.js-slides__next',
	navItemSelector: '.js-slides__nav-item',
	itemSelector: '.js-slides__item',
	liveRegionSelector: '.js-slides__liveregion',
	loadingClass: 'is--loading',
	activeClass: 'is--current',
	showPreviousClass: 'show--previous',
	showNextClass: 'show--next',
	hidePreviousClass: 'hide--previous',
	hideNextClass: 'hide--next',
	isCarousel: true,
	startIndex: 0,
	preload: false,
	autoPlay: false,
	slideDuration: 5
};

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJleGFtcGxlL3NyYy9hcHAuanMiLCJleGFtcGxlL3NyYy9saWJzL2NvbXBvbmVudC9pbmRleC5qcyIsImV4YW1wbGUvc3JjL2xpYnMvY29tcG9uZW50L2xpYi9jb21wb25lbnQtcHJvdG90eXBlLmpzIiwiZXhhbXBsZS9zcmMvbGlicy9jb21wb25lbnQvbGliL2RlZmF1bHRzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7QUNBQSxJQUFBLGFBQUEsUUFBQSxrQkFBQSxDQUFBOzs7Ozs7OztBQUVBLElBQU0sMEJBQTBCLENBQUMsWUFBTTtBQUNuQyxnQkFBQSxPQUFBLENBQUEsSUFBQSxDQUFBLG9CQUFBO0FBREosQ0FBZ0MsQ0FBaEM7O0FBSUEsSUFBRyxzQkFBSCxNQUFBLEVBQWlDLE9BQUEsZ0JBQUEsQ0FBQSxrQkFBQSxFQUE0QyxZQUFNO0FBQUUsNEJBQUEsT0FBQSxDQUFnQyxVQUFBLEVBQUEsRUFBQTtBQUFBLGVBQUEsSUFBQTtBQUFoQyxLQUFBO0FBQXBELENBQUE7Ozs7Ozs7OztBQ05qQyxJQUFBLFlBQUEsUUFBQSxnQkFBQSxDQUFBOzs7O0FBQ0EsSUFBQSxzQkFBQSxRQUFBLDJCQUFBLENBQUE7Ozs7Ozs7O0FBRUEsSUFBTSxPQUFPLFNBQVAsSUFBTyxDQUFBLEdBQUEsRUFBQSxJQUFBLEVBQWU7QUFDM0IsS0FBSSxNQUFNLEdBQUEsS0FBQSxDQUFBLElBQUEsQ0FBYyxTQUFBLGdCQUFBLENBQXhCLEdBQXdCLENBQWQsQ0FBVjtBQUNHOztBQUVILEtBQUcsQ0FBQyxJQUFKLE1BQUEsRUFBZ0IsTUFBTSxJQUFBLEtBQUEsQ0FBTix1REFBTSxDQUFOOztBQUVoQixRQUFPLElBQUEsR0FBQSxDQUFRLFVBQUEsRUFBQSxFQUFRO0FBQ3RCLFNBQU8sT0FBQSxNQUFBLENBQWMsT0FBQSxNQUFBLENBQWMscUJBQTVCLE9BQWMsQ0FBZCxFQUFpRDtBQUN2RCxTQUR1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LGNBQUEsRUFBeEIsSUFBd0IsQ0FBeEI7QUFDQSxPQUFBLFlBQUEsQ0FBQSxTQUFBLEdBQUEsWUFBdUMsSUFBdkMsQ0FBQSxJQUFBLE1BQUEsR0FBbUQsS0FBQSxNQUFBLENBQW5ELE1BQUE7QUFDQSxPQUFBLFlBQUEsR0FBQSxDQUFBO0FBMUdhLEVBQUE7QUFBQSxXQUFBLFNBQUEsUUFBQSxDQUFBLGFBQUEsRUE0R2E7QUFBQSxNQUFBLFNBQUEsSUFBQTs7QUFDcEIsT0FBQSxRQUFBLEdBQWdCLFlBQVksWUFBTTtBQUM5QixVQUFBLElBQUE7QUFEWSxHQUFBLEVBRWIsZ0JBQWdCLGdCQUFoQixJQUFBLEdBRkgsSUFBZ0IsQ0FBaEI7QUFHSDtBQWhIVSxDOzs7Ozs7OztrQkNMQTtBQUNkLHlCQURjLHNCQUFBO0FBRWQscUJBRmMsa0JBQUE7QUFHZCxrQkFIYyxzQkFBQTtBQUlkLGVBSmMsa0JBQUE7QUFLZCxxQkFMYyx3QkFBQTtBQU1kLGVBTmMsYUFBQTtBQU9kLGNBUGMsYUFBQTtBQVFkLG9CQVJjLGdCQUFBO0FBU2QsZ0JBVGMsWUFBQTtBQVVkLG9CQVZjLGdCQUFBO0FBV2QsZ0JBWGMsWUFBQTtBQVlkLGFBWmMsSUFBQTtBQWFkLGFBYmMsQ0FBQTtBQWNkLFVBZGMsS0FBQTtBQWVkLFdBZmMsS0FBQTtBQWdCZCxnQkFBZTtBQWhCRCxDIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiaW1wb3J0IFNsaWRlcyBmcm9tICcuL2xpYnMvY29tcG9uZW50JztcblxuY29uc3Qgb25ET01Db250ZW50TG9hZGVkVGFza3MgPSBbKCkgPT4ge1xuICAgIFNsaWRlcy5pbml0KCcuanMtc2xpZGVzLWRlZmF1bHQnKTtcbn1dO1xuICAgIFxuaWYoJ2FkZEV2ZW50TGlzdGVuZXInIGluIHdpbmRvdykgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCAoKSA9PiB7IG9uRE9NQ29udGVudExvYWRlZFRhc2tzLmZvckVhY2goKGZuKSA9PiBmbigpKTsgfSk7IiwiaW1wb3J0IGRlZmF1bHRzIGZyb20gJy4vbGliL2RlZmF1bHRzJztcbmltcG9ydCBjb21wb25lbnRQcm90b3R5cGUgZnJvbSAnLi9saWIvY29tcG9uZW50LXByb3RvdHlwZSc7XG5cbmNvbnN0IGluaXQgPSAoc2VsLCBvcHRzKSA9PiB7XG5cdGxldCBlbHMgPSBbXS5zbGljZS5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsKSk7XG4gICAgLy9sZXQgZWxzID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbCkpO1xuXG5cdGlmKCFlbHMubGVuZ3RoKSB0aHJvdyBuZXcgRXJyb3IoJ1NsaWRlcyBub3QgaW5pdGlhbGlzZWQsIG5vIGF1Z21lbnRhYmxlIGVsZW1lbnRzIGZvdW5kJyk7XG4gICAgXG5cdHJldHVybiBlbHMubWFwKChlbCkgPT4ge1xuXHRcdHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoY29tcG9uZW50UHJvdG90eXBlKSwge1xuXHRcdFx0bm9kZTogZWwsXG5cdFx0XHRzZXR0aW5nczogT2JqZWN0LmFzc2lnbih7fSwgZGVmYXVsdHMsIG9wdHMpXG5cdFx0fSkuaW5pdCgpO1xuXHR9KTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHsgaW5pdCB9OyIsImNvbnN0IEtFWV9DT0RFUyA9IHtcblx0XHRFTlRFUjogMTNcblx0fSxcblx0VFJJR0dFUl9FVkVOVFMgPSBbJ2NsaWNrJywgJ2tleWRvd24nIF07XG5cbmV4cG9ydCBkZWZhdWx0IHtcblx0aW5pdCgpe1xuXHRcdHRoaXMuc2xpZGVzID0gW10uc2xpY2UuY2FsbCh0aGlzLm5vZGUucXVlcnlTZWxlY3RvckFsbCh0aGlzLnNldHRpbmdzLml0ZW1TZWxlY3RvcikpXG5cdFx0XHRcdFx0XHQubWFwKHNsaWRlID0+ICh7XG5cdFx0XHRcdFx0XHRcdHVubG9hZGVkSW1nczogW10uc2xpY2UuY2FsbChzbGlkZS5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1zcmNzZXRdLCBbZGF0YS1zcmNdJykpLFxuXHRcdFx0XHRcdFx0XHRjb250YWluZXI6IHNsaWRlXG5cdFx0XHRcdFx0XHR9KSk7XG5cblx0XHR0aGlzLm5leHRCdXR0b24gPSB0aGlzLm5vZGUucXVlcnlTZWxlY3Rvcih0aGlzLnNldHRpbmdzLmJ1dHRvbk5leHRTZWxlY3Rvcik7XG5cdFx0dGhpcy5wcmV2aW91c0J1dHRvbiA9IHRoaXMubm9kZS5xdWVyeVNlbGVjdG9yKHRoaXMuc2V0dGluZ3MuYnV0dG9uUHJldmlvdXNTZWxlY3Rvcik7XG5cdFx0dGhpcy5uYXZJdGVtcyA9IFtdLnNsaWNlLmNhbGwodGhpcy5ub2RlLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5zZXR0aW5ncy5uYXZJdGVtU2VsZWN0b3IpKTtcblxuXHRcdGlmKHRoaXMubmF2SXRlbXMubGVuZ3RoID4gMCAmJiB0aGlzLm5hdkl0ZW1zLmxlbmd0aCAhPT0gdGhpcy5zbGlkZXMubGVuZ3RoKSB0aHJvdyBuZXcgRXJyb3IoJ1NsaWRlIG5hdmlnYXRpb24gZG9lcyBub3QgbWF0Y2ggdGhlIG51bWJlciBvZiBzbGlkZXMuJyk7XG5cblx0XHR0aGlzLm5vdGlmaWNhdGlvbiA9IHRoaXMubm9kZS5xdWVyeVNlbGVjdG9yKHRoaXMuc2V0dGluZ3MubGl2ZVJlZ2lvblNlbGVjdG9yKTtcblx0XHR0aGlzLnNldEN1cnJlbnQodGhpcy5zZXR0aW5ncy5zdGFydEluZGV4KTtcblx0XHR0aGlzLnNsaWRlc1t0aGlzLmN1cnJlbnRJbmRleF0uY29udGFpbmVyLmNsYXNzTGlzdC5hZGQodGhpcy5zZXR0aW5ncy5hY3RpdmVDbGFzcyk7XG5cdFx0dGhpcy5pbml0SGFuZGxlcnMoKTtcblx0XHR0aGlzLnNldHRpbmdzLnByZWxvYWQgPyB0aGlzLnNsaWRlcy5mb3JFYWNoKChzbGlkZSwgaSkgPT4geyB0aGlzLmxvYWRJbWFnZShpKTsgfSkgOiB0aGlzLmxvYWRJbWFnZXModGhpcy5zZXR0aW5ncy5zdGFydEluZGV4KTtcbiAgICAgICAgdGhpcy5zZXR0aW5ncy5hdXRvUGxheSA/IHRoaXMuYXV0b1BsYXkodGhpcy5zZXR0aW5ncy5zbGlkZUR1cmF0aW9uKSA6IG51bGw7XG5cdFx0cmV0dXJuIHRoaXM7XG5cdH0sXG5cdGluaXRIYW5kbGVycygpe1xuXHRcdFRSSUdHRVJfRVZFTlRTLmZvckVhY2goZXYgPT4ge1xuXHRcdFx0WydwcmV2aW91cycsICduZXh0J10uZm9yRWFjaCh0eXBlID0+IHtcblx0XHRcdFx0aWYodGhpc1tgJHt0eXBlfUJ1dHRvbmBdKSB0aGlzW2Ake3R5cGV9QnV0dG9uYF0uYWRkRXZlbnRMaXN0ZW5lcihldiwgZSA9PiB7XG5cdFx0XHRcdFx0aWYoZS5rZXlDb2RlICYmIGUua2V5Q29kZSAhPT0gS0VZX0NPREVTLkVOVEVSKSByZXR1cm47XG5cdFx0XHRcdFx0dGhpc1t0eXBlXSgpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXHRcdFx0dGhpcy5uYXZJdGVtcy5sZW5ndGggPiAwICYmIHRoaXMubmF2SXRlbXMuZm9yRWFjaCgoaXRlbSwgaSlcdCA9PiB7XG5cdFx0XHRcdGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcihldiwgZSA9PiB7XG5cdFx0XHRcdFx0aWYoZS5rZXlDb2RlICYmIGUua2V5Q29kZSAhPT0gS0VZX0NPREVTLkVOVEVSKSByZXR1cm47XG5cdFx0XHRcdFx0dGhpcy5jaGFuZ2UoaSk7XG5cdFx0XHRcdH0pXG5cdFx0XHR9KTtcblx0XHR9KTtcblx0fSxcblx0bG9hZEltYWdlKGkpe1xuXHRcdGlmKCF0aGlzLnNsaWRlc1tpXS51bmxvYWRlZEltZ3MubGVuZ3RoKSByZXR1cm47XG5cdFx0XG5cdFx0dGhpcy5zbGlkZXNbaV0uY29udGFpbmVyLmNsYXNzTGlzdC5hZGQodGhpcy5zZXR0aW5ncy5sb2FkaW5nQ2xhc3MpO1xuXHRcdHRoaXMuc2xpZGVzW2ldLnVubG9hZGVkSW1ncyA9IHRoaXMuc2xpZGVzW2ldLnVubG9hZGVkSW1ncy5yZWR1Y2UoKGFjYywgZWwpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRbJ3NyYycsICdzcmNzZXQnXS5mb3JFYWNoKHR5cGUgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYoZWwuaGFzQXR0cmlidXRlKGBkYXRhLSR7dHlwZX1gKSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRlbC5zZXRBdHRyaWJ1dGUodHlwZSwgZWwuZ2V0QXR0cmlidXRlKGBkYXRhLSR7dHlwZX1gKSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGVsLnJlbW92ZUF0dHJpYnV0ZShgZGF0YS0ke3R5cGV9YCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnNsaWRlc1tpXS5jb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLnNldHRpbmdzLmxvYWRpbmdDbGFzcyk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuIGFjYztcblx0XHRcdFx0XHRcdFx0XHRcdFx0fSwgW10pO1xuXHR9LFxuXHRsb2FkSW1hZ2VzKGkpe1xuXHRcdGlmKCF0aGlzLm5vZGUucXVlcnlTZWxlY3RvcignW2RhdGEtc3JjXSwgW2RhdGEtc3Jjc2V0XScpKSByZXR1cm47XG5cdFx0bGV0IGluZGV4ZXMgPSBbaV07XG5cblx0XHRpZih0aGlzLnNsaWRlcy5sZW5ndGggPiAxKSBpbmRleGVzLnB1c2goaSA9PT0gMCA/IHRoaXMuc2xpZGVzLmxlbmd0aCAtIDEgOiBpIC0gMSk7XG5cdFx0aWYodGhpcy5zbGlkZXMubGVuZ3RoID4gMikgaW5kZXhlcy5wdXNoKGkgPT09IHRoaXMuc2xpZGVzLmxlbmd0aCAtIDEgPyAwIDogaSArIDEpO1xuXG5cdFx0aW5kZXhlcy5mb3JFYWNoKGlkeCA9PiB7IHRoaXMubG9hZEltYWdlKGlkeCkgfSk7XG5cdH0sXG5cdHJlc2V0KCl7XG5cdFx0dGhpcy5zbGlkZXNbdGhpcy5jdXJyZW50SW5kZXhdLmNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuc2V0dGluZ3MuYWN0aXZlQ2xhc3MpO1xuXHRcdHRoaXMuc2xpZGVzW3RoaXMuY3VycmVudEluZGV4XS5jb250YWluZXIucmVtb3ZlQXR0cmlidXRlKCd0YWJpbmRleCcpO1xuXHRcdHRoaXMubmF2SXRlbXMubGVuZ3RoICYmIHRoaXMubmF2SXRlbXNbdGhpcy5jdXJyZW50SW5kZXhdLnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1jdXJyZW50Jyk7XG5cblx0XHRsZXQgcHJldmlvdXNseUhpZGRlbiA9IHRoaXMubm9kZS5xdWVyeVNlbGVjdG9yKGAuJHt0aGlzLnNldHRpbmdzLmhpZGVQcmV2aW91c0NsYXNzfWApLFxuXHRcdFx0cHJldmlvdXNseVNob3duID0gdGhpcy5ub2RlLnF1ZXJ5U2VsZWN0b3IoYC4ke3RoaXMuc2V0dGluZ3Muc2hvd1ByZXZpb3VzQ2xhc3N9YCksXG5cdFx0XHRuZXh0U2hvd24gPSB0aGlzLm5vZGUucXVlcnlTZWxlY3RvcihgLiR7dGhpcy5zZXR0aW5ncy5zaG93TmV4dENsYXNzfWApLFxuXHRcdFx0bmV4dEhpZGRlbiA9IHRoaXMubm9kZS5xdWVyeVNlbGVjdG9yKGAuJHt0aGlzLnNldHRpbmdzLmhpZGVOZXh0Q2xhc3N9YCk7XG5cblx0XHRwcmV2aW91c2x5SGlkZGVuICYmIHByZXZpb3VzbHlIaWRkZW4uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLnNldHRpbmdzLmhpZGVQcmV2aW91c0NsYXNzKTtcblx0XHRwcmV2aW91c2x5U2hvd24gJiYgcHJldmlvdXNseVNob3duLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5zZXR0aW5ncy5zaG93UHJldmlvdXNDbGFzcyk7XG5cdFx0bmV4dFNob3duICYmIG5leHRTaG93bi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuc2V0dGluZ3Muc2hvd05leHRDbGFzcyk7XG5cdFx0bmV4dEhpZGRlbiAmJiBuZXh0SGlkZGVuLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5zZXR0aW5ncy5oaWRlTmV4dENsYXNzKTtcblx0fSxcblx0bmV4dCgpe1xuXHRcdHRoaXMuY2hhbmdlKCh0aGlzLmN1cnJlbnRJbmRleCA9PT0gdGhpcy5zbGlkZXMubGVuZ3RoIC0gMSA/IDAgOiB0aGlzLmN1cnJlbnRJbmRleCArIDEpKTtcblx0fSxcblx0cHJldmlvdXMoKXtcblx0XHR0aGlzLmNoYW5nZSgodGhpcy5jdXJyZW50SW5kZXggPT09IDAgPyB0aGlzLnNsaWRlcy5sZW5ndGggLSAxIDogdGhpcy5jdXJyZW50SW5kZXggLSAxKSk7XG5cdH0sXG5cdGNoYW5nZShpbmRleCl7XG5cdFx0aWYgKGluZGV4ID09PSB0aGlzLmN1cnJlbnRJbmRleCkgcmV0dXJuO1xuXHRcdFxuXHRcdHRoaXMucmVzZXQoKTtcblxuXHRcdGluZGV4ID0gaW5kZXggPT09IC0xID8gdGhpcy5zbGlkZXMubGVuZ3RoIC0gMSA6IGluZGV4ID09PSB0aGlzLnNsaWRlcy5sZW5ndGggPyAwIDogaW5kZXg7XG5cblx0XHR0aGlzLmxvYWRJbWFnZXMoaW5kZXgpO1xuXHRcdFxuXHRcdGxldCBpc0ZvcndhcmRzID0gKGluZGV4ID4gdGhpcy5jdXJyZW50SW5kZXggfHwgaW5kZXggPT09IDAgJiYgdGhpcy5jdXJyZW50SW5kZXggPT09IHRoaXMuc2xpZGVzLmxlbmd0aCAtIDEpICYmICEoaW5kZXggPT09ICh0aGlzLnNsaWRlcy5sZW5ndGggLSAxKSAmJiB0aGlzLmN1cnJlbnRJbmRleCA9PT0gMCk7XG5cdFx0XG5cdFx0dGhpcy5zbGlkZXNbdGhpcy5jdXJyZW50SW5kZXhdLmNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKGlzRm9yd2FyZHMgPyB0aGlzLnNldHRpbmdzLmhpZGVQcmV2aW91c0NsYXNzIDogdGhpcy5zZXR0aW5ncy5oaWRlTmV4dENsYXNzKTtcblx0XHR0aGlzLnNsaWRlc1tpbmRleF0uY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoYCR7aXNGb3J3YXJkcyA/IHRoaXMuc2V0dGluZ3Muc2hvd05leHRDbGFzcyA6IHRoaXMuc2V0dGluZ3Muc2hvd1ByZXZpb3VzQ2xhc3N9YCk7XG5cdFx0dGhpcy5zZXRDdXJyZW50KGluZGV4KTtcblx0XHQhdGhpcy5zZXR0aW5ncy5hdXRvUGxheSAmJiB0aGlzLnNsaWRlc1tpbmRleF0uY29udGFpbmVyLmZvY3VzKCk7XG5cdFx0XG5cdFx0KHRoaXMuc2V0dGluZ3MuY2FsbGJhY2sgJiYgdHlwZW9mIHRoaXMuc2V0dGluZ3MuY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpICYmIHRoaXMuc2V0dGluZ3MuY2FsbGJhY2soKTtcblx0fSxcblx0c2V0Q3VycmVudChpKXtcblx0XHR0aGlzLnNsaWRlc1tpXS5jb250YWluZXIuY2xhc3NMaXN0LmFkZCh0aGlzLnNldHRpbmdzLmFjdGl2ZUNsYXNzKTtcblx0XHR0aGlzLnNsaWRlc1tpXS5jb250YWluZXIuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsICctMScpO1xuXHRcdHRoaXMubmF2SXRlbXMubGVuZ3RoICYmIHRoaXMubmF2SXRlbXNbaV0uc2V0QXR0cmlidXRlKCdhcmlhLWN1cnJlbnQnLCB0cnVlKTtcblx0XHR0aGlzLm5vdGlmaWNhdGlvbi5pbm5lckhUTUwgPSBgU2xpZGUgJHtpICsgMX0gb2YgJHt0aGlzLnNsaWRlcy5sZW5ndGh9YDtcblx0XHR0aGlzLmN1cnJlbnRJbmRleCA9IGk7XG4gICAgfSxcbiAgICBhdXRvUGxheShzbGlkZUR1cmF0aW9uKSB7XG4gICAgICAgIHRoaXMuaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm5leHQoKTtcbiAgICAgICAgfSwgc2xpZGVEdXJhdGlvbiA/IHNsaWRlRHVyYXRpb24gKiAxMDAwIDogNTAwMCk7XG4gICAgfVxufTsiLCJleHBvcnQgZGVmYXVsdCB7XG5cdGJ1dHRvblByZXZpb3VzU2VsZWN0b3I6ICcuanMtc2xpZGVzX19wcmV2aW91cycsXG5cdGJ1dHRvbk5leHRTZWxlY3RvcjogJy5qcy1zbGlkZXNfX25leHQnLFxuXHRuYXZJdGVtU2VsZWN0b3I6ICcuanMtc2xpZGVzX19uYXYtaXRlbScsXG5cdGl0ZW1TZWxlY3RvcjogJy5qcy1zbGlkZXNfX2l0ZW0nLFxuXHRsaXZlUmVnaW9uU2VsZWN0b3I6ICcuanMtc2xpZGVzX19saXZlcmVnaW9uJyxcblx0bG9hZGluZ0NsYXNzOiAnaXMtLWxvYWRpbmcnLFxuXHRhY3RpdmVDbGFzczogJ2lzLS1jdXJyZW50Jyxcblx0c2hvd1ByZXZpb3VzQ2xhc3M6ICdzaG93LS1wcmV2aW91cycsXG5cdHNob3dOZXh0Q2xhc3M6ICdzaG93LS1uZXh0Jyxcblx0aGlkZVByZXZpb3VzQ2xhc3M6ICdoaWRlLS1wcmV2aW91cycsXG5cdGhpZGVOZXh0Q2xhc3M6ICdoaWRlLS1uZXh0Jyxcblx0aXNDYXJvdXNlbDogdHJ1ZSxcblx0c3RhcnRJbmRleDogMCxcblx0cHJlbG9hZDogZmFsc2UsXG5cdGF1dG9QbGF5OiBmYWxzZSxcblx0c2xpZGVEdXJhdGlvbjogNVxufTsiXX0=
